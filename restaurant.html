<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax"> -->
    <link rel="stylesheet" type="text/css" href="css/restaruant.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&family=Raleway:ital@1&display=swap" rel="stylesheet">

    <title>Restaurant Page</title>
</head>
<body>
   
<div class="container">
    <br><br>
    <h1 class="text-center">Restaurant Near By</h1>
    <div id="map"></div>
    <div class="form-group">
        <label for="location">Enter Location</label>
        <br><br>
        <input type="text" class="form-control" id="autocomplete" placeholder="Enter a Location">
    </div>
    <br>
    <div class="form-group">
        <label for="type">Select Restaurant Type:</label>
        <br>
        <select class="form-control" name="" id="type">
            <br>
            <option id ='fine_dining'>Fine-dining</option>
            <option id="casual-dining">Casual-dining</option>
            <option id="fast-food">Fast-food</option>
            <option id="food-trucks">Food-trucks</option>
            <option id="buffet">Buffet</option>
            <option id="family_style">Family_style</option>
            <option id="Bistro">Bistro</option>
            <option id="pizza">Pizza</option>
            <option id="bakery">Bakery</option>

        </select>
    </div>
    <br><br>
    <table class="table table-bordered table-striped" id="places"></table>
</div>
  <!-- <header class="p-5 mb-4 bg-light">
    <h1></h1> -->
    <!-- <div class="container"> -->
      <!-- Every grid layout we create starts with an HTML element receiving a class of row -->
      <!-- align-items-end change the alignment of flex items to end -->
      <!-- <div class="row align-items-end">
        <div class="col-12 col-md-6"> -->
          <!-- <img class='img-fluid' src="./../Images/02-placeholder.png" alt="video placeholder"> -->
        <!-- </div> -->
        <!-- Uses a combination of col-* values to make full-size on small devices and half-size on medium or larger devices -->
        <!-- <div class="col-12 col-md-6">
          <h1>Welcome to the app.</h1>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis, reprehenderit! Placeat quo
            necessitatibus porro corporis quasi architecto sit aspernatur inventore, perspiciatis nulla hic soluta ipsum
            ipsa sed iure dolorum! Tenetur? Lorem ipsum dolor sit amet consectetur adipisicing elit. Ex voluptatem
            dolorum earum esse recusandae facere aliquam. Excepturi facilis sint nesciunt ipsa, eveniet facere in quidem
            voluptas exercitationem distinctio commodi laborum!</p>
          <button class="btn btn-primary">Learn more.</button>
        </div> -->
      <!-- </div>
    </div> -->
  <!-- </header> -->
  <!-- <script async src="https://cse.google.com/cse.js?cx=2465d521d1b044f97">
  </script>
  <div class="gcse-search"></div> -->
 

 <script src="./source/restaurant.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDa-NcckTIrTU8Qhz437JcSJoK30OswcGg&libraries=places&callback=initMap"
        asyn defer></script>
<script>
    function initMap() {
        autocomplete = new google.maps.places.Autocomplete((document.getElementById('autocomplete')),
        {
            types:['geocode']
        })
        autocomplete.addListener('restaurant_changed', searchNearByRestaurants);
    }
    function searchNearByRestaurants(){
         document.getElementById('type').onchange = searchNearByRestaurants
    }
    function searchNearByRestaurants(){
        document.getElementById('restaurant').innerHTML = ''

        var restaurant = autocomplete.getRestauratn()
        console.log(restaurant)

        map = new google.maps.Map(document.getElementById('map'), {
            center: place.geometry.location,
            zoom: 15
        });

        service = new google.maps.places.PlacesService(map);
        service.nearbySearch({
            location: place.geometry.location,
            radius: '500',
            type: [document.getElementById('type').value]
        }, callback)
    }
    function callback(results, status) {
        if(status === google.maps.restaurant.RestaurantsServiceStatus.OK){
        console.log(results.length)
        for(var i = 0; i < results.lenght; i++) {
            createMarker(results[i]);
        }}

    function createMarker(restaurant){
        console.log(restaurant)
        var table = document.getElementById("restaurants");
        var row = table.insertRow();
        var cell1 = row.insertCell(0);
        cell1.innerHTML = restaurant.name;
        if(place.photos) {
            let photoUrl = place.photo[0].getUrl();
            let cell2 = row.insertCell(1)
            cell2.innerHTML = `<img width="300" height="300" src="${photoUrl}"/>`
        }else{ 
                let photoUrl = "https://via.placeholder.com/150"
                let cell2 = row.insertCell(1)
                cell2.innerHTML = `<img width="300" height="300" src="${photoUrl}"/>`
            }
        }
    }
    



</script>

</body>
</html>